"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[58],{3058:function(e,t,s){s.r(t),s.d(t,{default:function(){return L}});var n=s(5671),r=s(3144),o=s(136),i=s(5716),a=s(2791),l=s(5861),u=s(885),c=s(7757),d=s.n(c),p="ProfileInfo_descriptionBlock__FuPwT",h="ProfileInfo_mainPhoto__-3sBu",f="ProfileInfo_contact__tdDAa",x=s(4374),v=s(184),j=function(e){var t=(0,a.useState)(!1),s=(0,u.Z)(t,2),n=s[0],r=s[1],o=(0,a.useState)(e.status),i=(0,u.Z)(o,2),l=i[0],c=i[1];(0,a.useEffect)((function(){c(e.status)}),[e.status]);return(0,v.jsxs)("div",{children:[!n&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Status: "}),(0,v.jsx)("span",{onDoubleClick:function(){e.isOwner&&r(!0)},children:l||e.status||"----"})]}),n&&(0,v.jsx)("div",{children:(0,v.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),e.updateStatusTC(l),c(e.status)},value:l})})]})},m=s(4353),b=s(5987),g=s(1413),P=s(5705),k=["value"],y=function(e){var t,s,n,r,o,i=e.profile,l=e.onSubmit,c=(0,a.useState)(""),d=(0,u.Z)(c,2),p=d[0],h=d[1],x=(0,a.useState)(""),j=(0,u.Z)(x,2),m=j[0],y=j[1],w=(0,P.TA)({initialValues:{fullName:null!==(t=i.fullName)&&void 0!==t?t:"",lookingForAJob:null!==(s=i.lookingForAJob)&&void 0!==s?s:"",lookingForAJobDescription:null!==(n=i.lookingForAJobDescription)&&void 0!==n?n:"",aboutMe:null!==(r=i.aboutMe)&&void 0!==r?r:"",contacts:null!==(o=i.contacts)&&void 0!==o?o:""},onSubmit:function(e,t){var s;l(e).then((function(e){console.log(e),h(e),e&&(s=e.split("Invalid url format (Contacts->")[1].slice(0,-1).toLowerCase(),y(s),t.setFieldError(m,e+""))})).catch((function(e){t.setFieldError(s,e)}))}});return(0,v.jsxs)("form",{onSubmit:w.handleSubmit,children:[(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",children:"Save"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name:"}),(0,v.jsx)("input",(0,g.Z)({placeholder:"Full name"},w.getFieldProps("fullName")))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job:"}),(0,v.jsx)("input",(0,g.Z)({type:"checkbox"},w.getFieldProps("lookingForAJob")))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills:"}),(0,v.jsx)("textarea",(0,g.Z)({placeholder:"lookingForAJobDescription"},w.getFieldProps("lookingForAJobDescription")))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me:"}),(0,v.jsx)("textarea",(0,g.Z)({placeholder:"About me"},w.getFieldProps("aboutMe")))]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),":"," ",Object.keys(i.contacts).map((function(e){var t=w.getFieldProps("contacts."+e),s=t.value,n=(0,b.Z)(t,k);return(0,v.jsxs)("div",{className:f,children:[(0,v.jsxs)("b",{children:[e,": ",(0,v.jsx)("input",(0,g.Z)({placeholder:e,value:null!==s&&void 0!==s?s:""},n))]}),m===e&&(0,v.jsx)("div",{style:{margin:"10px",color:"red",fontWeight:"bold"},children:p})]},e)}))]})]})},w=function(e){var t=e.profile,s=e.isOwner,n=e.goToEditMode;return(0,v.jsxs)("div",{children:[s&&(0,v.jsx)("div",{children:(0,v.jsx)("button",{onClick:n,children:"Edit"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name"}),": ",t.fullName]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job"}),": ",t.lookingForAJob?"yes":"no"]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills"}),": ",t.lookingForAJobDescription]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me"}),": ",t.aboutMe]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),":"," ",Object.keys(t.contacts).map((function(e){return(0,v.jsx)(C,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},C=function(e){var t=e.contactTitle,s=e.contactValue;return(0,v.jsxs)("div",{className:f,children:[(0,v.jsx)("b",{children:t}),": ",s]})},S=function(e){var t=e.profile,s=e.status,n=e.updateStatusTC,r=e.isOwner,o=e.savePhoto,i=e.saveProfile,c=(0,a.useState)(!1),f=(0,u.Z)(c,2),b=f[0],g=f[1],P=(0,a.useState)(!1),k=(0,u.Z)(P,2),C=k[0],S=k[1];if(!e.profile)return(0,v.jsx)(x.Z,{});var F=function(){var e=(0,l.Z)(d().mark((function e(t){var s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:if(!(s=e.sent)){e.next=5;break}return e.abrupt("return",s);case 5:g(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:p,children:[(0,v.jsx)("img",{src:t.photos.large||m,className:h}),r&&(0,v.jsx)("button",{onClick:function(){return S(!C)},children:"change photo"}),C&&(0,v.jsx)("input",{type:"file",onChange:function(e){return function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&o(e.target.files[0])}(e)}}),b?(0,v.jsx)(y,{profile:t,onSubmit:F}):(0,v.jsx)(w,{profile:t,isOwner:r,goToEditMode:function(){g(!0)}}),(0,v.jsx)(j,{status:s,updateStatusTC:n,isOwner:r})]})})},F=s(81),Z="MyPosts_postsBlock__d2dc2",_="MyPosts_posts__5Qse7",A="Post_item__2p4N0",T=function(e){return(0,v.jsxs)("div",{className:A,children:[(0,v.jsx)("img",{src:"https://avatars.mds.yandex.net/i?id=a4e67ec8966163d185ea5a5b908a9fc8_l-5236752-images-thumbs&n=13"}),e.message,(0,v.jsx)("div",{children:(0,v.jsxs)("span",{children:["like ",e.likesCount]})})]})},O=a.memo((function(e){var t=e.postsData.map((function(e){return(0,v.jsx)(T,{message:e.message,likesCount:e.likesCount},e.id)}));(0,a.useRef)(null);return(0,v.jsxs)("div",{className:Z,children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsx)("div",{children:(0,v.jsx)(N,{addPost:e.addPost})}),(0,v.jsx)("div",{className:_,children:t})]})})),N=function(e){var t=(0,P.TA)({initialValues:{newPost:""},validate:function(e){var t={};return e.newPost||(t.newPost="enter your post text"),t},onSubmit:function(s){console.log(s),e.addPost(s.newPost),t.resetForm()}});return(0,v.jsxs)("div",{children:[(0,v.jsxs)("form",{action:"",onSubmit:t.handleSubmit,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("textarea",(0,g.Z)({},t.getFieldProps("newPost"))),t.touched.newPost&&t.errors.newPost&&(0,v.jsx)("div",{style:{color:"red",margin:"5px"},children:t.errors.newPost})]}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",disabled:!!t.errors.newPost,children:"Add new post"})})]}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"Remove post"})})]})},D=O,M=s(364),I=(0,M.$j)((function(e){return{postsData:e.profilePage.postsData}}),(function(e){return{addPost:function(t){e((0,F.Wl)(t))}}}))(D),J=function(e){return(0,v.jsxs)("div",{children:[(0,v.jsx)(S,{profile:e.profile,status:e.status,updateStatusTC:e.updateStatusTC,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,v.jsx)(I,{})]})},E=s(9271),B=s(7781),V=s(2932),$=function(e){(0,o.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=""+this.props.id)||this.props.history.push("/login"),this.props.getUserProfileTC(e),this.props.getStatusTC(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)("div",{children:(0,v.jsx)(J,{profile:this.props.profile,status:this.props.status,updateStatusTC:this.props.updateStatusTC,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})})}}]),s}(a.Component),L=(0,B.qC)((0,M.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,id:e.auth.data.id}}),{getUserProfileTC:F.d$,getStatusTC:F.GP,updateStatusTC:F.OG,savePhoto:F.Ju,saveProfile:F.Ii}),E.EN,V.e)($)},2932:function(e,t,s){s.d(t,{e:function(){return c}});var n=s(1413),r=s(5987),o=(s(2791),s(9271)),i=s(364),a=s(184),l=["isAuth"],u=function(e){return{isAuth:e.auth.isAuth}};function c(e){return(0,i.$j)(u)((function(t){var s=t.isAuth,i=(0,r.Z)(t,l);return s?(0,a.jsx)(e,(0,n.Z)({},i)):(0,a.jsx)(o.l_,{to:"/login"})}))}},5987:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(3366);function r(e,t){if(null==e)return{};var s,r,o=(0,n.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}}}]);
//# sourceMappingURL=58.f000ed76.chunk.js.map