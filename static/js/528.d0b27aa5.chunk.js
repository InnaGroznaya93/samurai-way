"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[528],{8528:function(t,s,e){e.r(s),e.d(s,{default:function(){return A}});var n=e(5671),r=e(3144),i=e(136),o=e(5716),a=e(2791),u="ProfileInfo_descriptionBlock__FuPwT",l="ProfileInfo_mainPhoto__-3sBu",c=e(4374),d=e(885),p=e(184),h=function(t){var s=(0,a.useState)(!1),e=(0,d.Z)(s,2),n=e[0],r=e[1],i=(0,a.useState)(t.status),o=(0,d.Z)(i,2),u=o[0],l=o[1];(0,a.useEffect)((function(){l(t.status)}),[t.status]);return(0,p.jsxs)("div",{children:[!n&&(0,p.jsx)("div",{children:(0,p.jsx)("span",{onDoubleClick:function(){r(!0)},children:u||t.status||"----"})}),n&&(0,p.jsx)("div",{children:(0,p.jsx)("input",{onChange:function(t){l(t.currentTarget.value)},autoFocus:!0,onBlur:function(){r(!1),t.updateStatusTC(u)},value:u})})]})},f=e(4353),v=function(t){var s=t.profile,e=t.status,n=t.updateStatusTC,r=t.isOwner,i=t.savePhoto;if(!t.profile)return(0,p.jsx)(c.Z,{});return console.log(t.status),(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:u,children:[(0,p.jsx)("img",{src:s.photos.large||f,className:l}),r&&(0,p.jsx)("input",{type:"file",onChange:function(t){return function(t){var s;null!==(s=t.target.files)&&void 0!==s&&s.length&&i(t.target.files[0])}(t)}}),(0,p.jsx)(h,{status:e,updateStatusTC:n})]})})},j=e(81),m=e(1413),x="MyPosts_postsBlock__d2dc2",P="MyPosts_posts__5Qse7",g="Post_item__2p4N0",y=function(t){return(0,p.jsxs)("div",{className:g,children:[(0,p.jsx)("img",{src:"https://avatars.mds.yandex.net/i?id=a4e67ec8966163d185ea5a5b908a9fc8_l-5236752-images-thumbs&n=13"}),t.message,(0,p.jsx)("div",{children:(0,p.jsxs)("span",{children:["like ",t.likesCount]})})]})},C=e(5705),w=a.memo((function(t){var s=t.postsData.map((function(t){return(0,p.jsx)(y,{message:t.message,likesCount:t.likesCount})}));(0,a.useRef)(null);return(0,p.jsxs)("div",{className:x,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)("div",{children:(0,p.jsx)(_,{addPost:t.addPost})}),(0,p.jsx)("div",{className:P,children:s})]})})),_=function(t){var s=(0,C.TA)({initialValues:{newPost:""},validate:function(t){var s={};return t.newPost||(s.newPost="enter your post text"),s},onSubmit:function(e){console.log(e),t.addPost(e.newPost),s.resetForm()}});return(0,p.jsxs)("div",{children:[(0,p.jsxs)("form",{action:"",onSubmit:s.handleSubmit,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("textarea",(0,m.Z)({},s.getFieldProps("newPost"))),s.touched.newPost&&s.errors.newPost&&(0,p.jsx)("div",{style:{color:"red",margin:"5px"},children:s.errors.newPost})]}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{type:"submit",disabled:!!s.errors.newPost,children:"Add new post"})})]}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Remove post"})})]})},b=w,S=e(364),k=(0,S.$j)((function(t){return{postsData:t.profilePage.postsData}}),(function(t){return{addPost:function(s){t((0,j.Wl)(s))}}}))(b),T=function(t){return(0,p.jsxs)("div",{children:[(0,p.jsx)(v,{profile:t.profile,status:t.status,updateStatusTC:t.updateStatusTC,isOwner:t.isOwner,savePhoto:t.savePhoto}),(0,p.jsx)(k,{})]})},O=e(9271),Z=e(7781),I=e(5571),N=function(t){(0,i.Z)(e,t);var s=(0,o.Z)(e);function e(){return(0,n.Z)(this,e),s.apply(this,arguments)}return(0,r.Z)(e,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=""+this.props.id)||this.props.history.push("/login"),this.props.getUserProfileTC(t),this.props.getStatusTC(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s,e){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)("div",{children:(0,p.jsx)(T,{profile:this.props.profile,status:this.props.status,updateStatusTC:this.props.updateStatusTC,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto})})}}]),e}(a.Component),A=(0,Z.qC)((0,S.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,id:t.auth.data.id}}),{getUserProfileTC:j.d$,getStatusTC:j.GP,updateStatusTC:j.OG,savePhoto:j.Ju}),O.EN,I.e)(N)},5571:function(t,s,e){e.d(s,{e:function(){return c}});var n=e(1413),r=e(3366);e(2791);var i=e(9271),o=e(364),a=e(184),u=["isAuth"],l=function(t){return{isAuth:t.auth.isAuth}};function c(t){return(0,o.$j)(l)((function(s){var e=s.isAuth,o=function(t,s){if(null==t)return{};var e,n,i=(0,r.Z)(t,s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)e=o[n],s.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}(s,u);return e?(0,a.jsx)(t,(0,n.Z)({},o)):(0,a.jsx)(i.l_,{to:"/login"})}))}}}]);
//# sourceMappingURL=528.d0b27aa5.chunk.js.map